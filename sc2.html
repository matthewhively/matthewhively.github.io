<!DOCTYPE html> 
<html>
<head>
    <title>GSL Youtube Links</title>

<meta charset="UTF-8"> 
<meta name="viewport" part 2ent="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>

<style type="text/css">
label {
   font-size: 30px;
   font-weight: bold;
}
.most_recent::before {
   content: '**';
}
</style>

<script type="text/javascript">

// Access page via https://matthewhively.github.io/

// useful: https://www.youtube.com/embed/chElHV99xak?start=53&end=59   <<< specify both START and END time  (ONLY works for embedded)

var video_array = []; // add videos to this array as we loop through matches, so that indexes stay consistent (without having to skip numbers)
/* 
https://www.youtube.com/watch?v=3vmrJhh4gBk&list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw - GSL 2020 season 3  (just started aug 29th)
https://www.youtube.com/playlist?list=PLo2fPnM8EiQxkTPyq1MruNFvoVL3ixSPi - GSL 2020 super tournament 2

*/
// TODO: add a button to make the video into fullscreen (if possible) or style the fullscreen button larger?
//https://developers.google.com/youtube/iframe_api_reference
//https://stackoverflow.com/questions/15114884/make-youtube-video-fullscreen-using-iframe-and-javascript-api

// TODO: Add a quick way to save the current timestamp so that reloading the player does not make me loose my place.
// https://stackoverflow.com/questions/58870093/get-current-timestamp-of-embedded-youtube-playlist-videos-from-the-iframe-tag

// if I could just style .ytp-fullscreen-button {position: fixed; top:0; right:0; height: initial;}  --- that would be good enough to easily hit the button
// does behave somewhat weird though!   Or maybe just {transform: scale(2);}  --- that would be fine too
var matches = [
/*
['All Twitch', 'https://www.twitch.tv/videos/114595757'],
*/
'GSL 2020 Season 2',
'R.24',
'Group A',
// Don't delete season 2 yet, there are lots of videos in here I want to save
['Match 1','https://youtu.be/dyWVqeeevH4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=931'],
['Match 2','https://youtu.be/OA8_PAETKP0?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=184'],
['Match 3','https://youtu.be/u5H1fxiMXrk?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=143'],
['Match 4','https://youtu.be/2zn1JkU1jzk?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=151'],
['Match 5','https://youtu.be/oAIe_0EMMwM?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=351'],
'Group B',
['Match 1','https://youtu.be/MONeqFDYdoY?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=521'],
['Match 2','https://youtu.be/VQ345LM6HFg?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=190'],
['Match 3','https://youtu.be/xWBcwRHQ_mo?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=143'],
['Match 4','https://youtu.be/kOTm5aDmhTc?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=126'],
['Match 5','https://youtu.be/B8RKgJHoyQY?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=345'],
'Group C',
['Match 1','https://youtu.be/h5KvQ6ahvkA?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=446'],
['Match 2','https://youtu.be/v18VK5Ksst0?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=152'],
['Match 3','https://youtu.be/Ya8y1g92-rk?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=160'],
['Match 4','https://youtu.be/9y_yfu5mf3U?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=119'],
['Match 5','https://youtu.be/xlf65u80-MU?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=98'],
'Group D',
['Match 1','https://youtu.be/jTWbzSUDos4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=588'],
['Match 2','https://youtu.be/PcLfe4-VQF8?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=203'],
['Match 3','https://youtu.be/0GWocZNQwMk?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=168'],
['Match 4','https://youtu.be/4aKXWWfaWv0?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=120'],
['Match 5','https://youtu.be/AxftyhPXt3w?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=140'],
'Group E',
['Match 1','https://youtu.be/sShf_tAQIKM?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=518'],
['Match 2','https://youtu.be/5hP18HRnNnY?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=191'],
['Match 3','https://youtu.be/ExLGl6atdRE?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=126'],
['Match 4','https://youtu.be/IKoFl6z62vk?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=185'],
['Match 5','https://youtu.be/hFwnljcF2yQ?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=180'],
'Group F',
['Match 1','https://youtu.be/z1up2E93-iY?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=472'],
['Match 2','https://youtu.be/hjQrwGo_jq8?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=173'],
['Match 3','https://youtu.be/SK-BsjHJvu4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=159'],
['Match 4','https://youtu.be/U82wN7obdcg?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=141'],
['Match 5','https://youtu.be/jOsCG4LeBYA?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=148'],
'R.16',
'Group A',
['Match 1','https://youtu.be/zQPvWGJ1rDU?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=709'],
['Match 2','https://youtu.be/cpLS_Z3ghNY?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=201'],
['Match 3','https://youtu.be/21sC6KX1wgo?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=125'],
['Match 4','https://youtu.be/He8ER3DCBOE?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=162'],
['Match 5','https://youtu.be/lIjn4Pd-dZ0?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=183'],
'Group B',
['Match 1','https://youtu.be/o9X_IIFJ9xU?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=635'],
['Match 2','https://youtu.be/T45bme9asMI?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=189'],
['Match 3','https://youtu.be/kUaLWpPTOO4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=156'],
['Match 4','https://youtu.be/oX-PATjKqY0?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=135'],
['Match 5','https://youtu.be/jcjJhQAT5ZE?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=181'],
'Group C',
['Match 1','https://youtu.be/fdza0DOjjsY?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=591'],
['Match 2','https://youtu.be/EsUkGMVDTSw?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=170'],
['Match 3','https://youtu.be/73fsg8q1M9c?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=165'],
['Match 4','https://youtu.be/yjjqeG3Ks7U?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=147'],
['Match 5','https://youtu.be/OfxSiI8ZM8M?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=177'],
'Group D',
['Match 1','https://youtu.be/Wfb5ZmBHia4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=597'],
['Match 2','https://youtu.be/EfTGNJL2VlU?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=194'],
['Match 3','https://youtu.be/Aw_EZ6wHwrE?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=171'],
['Match 4','https://youtu.be/MObI1EFRiT4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=154'],
['Match 5','https://youtu.be/-DBwR3oJadg?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=129'],
'R.8',
['Match 1','https://youtu.be/USG8_zYPq1U?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=621'],
['Match 2','https://youtu.be/fEJjWXK6fL8?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=423'],
['Match 3','https://youtu.be/0wmNE7nqR_c?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=644'],
['Match 4','https://youtu.be/EvCkCxpz3iU?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=506'],
'R.4',
['Match 1 part 1/2','https://youtu.be/kQEJJlXlD74?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=1569'],
['Match 1 part 3+','https://youtu.be/kQEJJlXlD74?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=2934'],
['Match 2 part 1/2','https://youtu.be/sEYEd4EZwc4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=1619'],
['Match 2 part 3/4','https://youtu.be/sEYEd4EZwc4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=3085'],
['Match 2 part 5+','https://youtu.be/sEYEd4EZwc4?list=PLo2fPnM8EiQyuO2RJCz04sHc9k_mboSIf&t=4929'],
'Finals',
['Match 1 part 1/2','https://youtu.be/grTt3OdrvTA?t=3274'],
['Match 1 part 3/4','https://youtu.be/grTt3OdrvTA?t=5483'],
['Match 1 part 5+','https://youtu.be/grTt3OdrvTA?t=7492'],
'GSL 2020 Season 2',
'R.24',
'Group F',
['Match 1','https://youtu.be/Wip2rx_WjMc?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=464'],
['Match 2','https://youtu.be/yYc-1TkZUWI?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=208'],
['Match 3','https://youtu.be/u3T10lynKs0?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=156'],
['Match 4','https://youtu.be/zAHhRsA2COo?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=127'],
['Match 5','https://youtu.be/LoWlEQbgM8E?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=129'],
'R.16',
'Group A',
['Match 1','https://youtu.be/6tLhjpgFbTc?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=481'],
['Match 2','https://youtu.be/l3JaR2detKs?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=153'],
['Match 3','https://youtu.be/sHfmi7PTsoY?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=170'],
['Match 4','https://youtu.be/WKxBloo2jFo?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=145'],
['Match 5','https://youtu.be/wgb1BGG4VIo?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=102'],
'Group B',
['Match 1','https://youtu.be/X0NERhYSTfs?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=535'],
['Match 2','https://youtu.be/jlurUKERBfA?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=185'],
['Match 3','https://youtu.be/espFjSah20Q?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=139'],
['Match 4','https://youtu.be/yUoQzgFIdoc?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=128'],
['Match 5','https://youtu.be/kmpb0KCLY50?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=444'],
'Group C',
['Match 1','https://youtu.be/2S88Oj95o-A?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=426'],
['Match 2','https://youtu.be/dZMEBjPIP7g?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=243'],
['Match 3','https://youtu.be/D-IcwFV4srU?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=162'],
['Match 4','https://youtu.be/zzbgeUKxaQg?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=125'],
['Match 5','https://youtu.be/lbi9Ef76poM?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=136'],
'Group D',
['Match 1','https://youtu.be/cQv2T7V0ZW4?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=396'],
['Match 2','https://youtu.be/7Hkzq4_Gp8U?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=188'],
['Match 3','https://youtu.be/1fR2nzZ6Ikk?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=115'],
['Match 4','https://youtu.be/R4WY1RmbGJY?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=115'],
['Match 5','https://youtu.be/M1Sfx2mpayg?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=136'],
'R.8',
['Match 1','https://youtu.be/zVQ33KVm47Y?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=676'],
['Match 2 a','https://youtu.be/ab_DZ-oiCCw?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=544'],
['Match 2 b','https://youtu.be/ab_DZ-oiCCw?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=3260'],
['Match 3 a','https://youtu.be/BcRT-w8cJFc?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=607'],
['Match 3 b','https://youtu.be/BcRT-w8cJFc?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=3525'],
['Match 4 a','https://youtu.be/Y3to2GUf2OU?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=498'],
['Match 4 b','https://youtu.be/Y3to2GUf2OU?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=3378'],
'R.4',
['Match 1 a','https://youtu.be/-3jzyOpb2F0?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=1701'],
['Match 1 b','https://youtu.be/-3jzyOpb2F0?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=3570'],
['Match 2 a','https://youtu.be/3nbfHUMl5VE?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=1648'],
['Match 2 b','https://youtu.be/3nbfHUMl5VE?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=3531'],
['Match 2 c','https://youtu.be/3nbfHUMl5VE?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=5263'],
'Finals',
['Finals 1,2','https://youtu.be/rKefXYXowPk?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=3145'],
['Finals 3,4','https://youtu.be/rKefXYXowPk?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=6247'],
['Finals 5,6,7','https://youtu.be/rKefXYXowPk?list=PLo2fPnM8EiQwi4Ds_ac11oyVNwotPE-dw&t=9252'],
];
/*
'R.32',
'R.24',
'R.16',
'Group A',
'Group B',
'Group C',
'Group D',
'Group E',
'Group F',
'Group G',
'Group H',
GROUP format
['Match 1',''],
['Match 2',''],
['Match 3',''],
['Match 4',''],
['Match 5',''],


// TODO may want to format the same way as with the finals with shortcut links after the commercial breaks
'R.8',
'R.4',
['Match 1',''],
['Match 2',''],
['Match 3',''],
['Match 4',''],
ALT
['Match 1 Part 1,2,3',''],
['Match 1 Part 4+',''],
['Match 2 Part 1,2,3',''],
['Match 2 Part 4+',''],
['Match 3 Part 1,2,3',''],
['Match 3 Part 4+',''],
['Match 4 Part 1,2,3',''],
['Match 4 Part 4+',''],

'Finals',
['Finals 1,2',''],
['Finals 3,4',''],
['Finals 5,6,7',''],
OR
['Finals until X',''],
['Finals until Y',''],
['Finals until Z',''],
OR
['Finals Part 1',''],
['Finals Part 2',''],
['Finals Part 3',''],
*/


function setC(n,v,p,t) {  //set cookie
    if (arguments.length < 2) {return;} //no cookie without name+value pair
    p = p || '/';
    t = t || 30*60; //30min default
    var e,
        dt = new Date();
    dt.setTime(dt.getTime()+(t*1000)); // num sec * millisec
    e = dt.toGMTString();
    document.cookie = n + '=' + encodeURIComponent(v) + '; path=' + p + '; expires=' + e;
}

function parseQuery(query) { // using ; or & allows this to work for cookies too
   var pairs,
       pair,
       i,  // loop counters
       params = {},
       uesc = decodeURIComponent;

   // NOTE: this will NOT handle arrays of params like ?foo[]=bar&foo[]=baz   should yield foo = array(bar,baz)
   if (query) {
       pairs = query.split(/; *|&/); // cookies might have spaces or not, url params will NOT
       for (i=0; i < pairs.length; i++) {
           pair = pairs[i].split('=');
           if ( ! pair ) continue; // if the split failed for any reason skip it
           if (pair.length >= 2)
             { params[uesc(pair[0])] = uesc(pair.slice(1).join("=")); } // incase there was an extra = in the value portion
           else
             { params[uesc(pair[0])] = true; }
       }
       params.length = i; // add a quick length attribute for usefulness
   }
   return params;
}

var cParams = parseQuery(document.cookie);

if (! cParams['vid_url'] && matches.length > 0) { // if no cookie, start at the beginning ::: find the first array type entry and start with that.
    var i = 0;
    while (i < matches.length && typeof(matches[i]) == 'string' ) {
        i++;
    }
    cParams['vid_url'] = matches[i][1];
}

function update_elements(idx, now_playing) {
	// Update the reload player button
	document.getElementById('reload_shortcut').innerHTML = '<a href="javascript:" onclick="setup_player(this, ' + idx + ');">reload player</a>';

	// Update the next video button (if there is a next video)
	if (idx < video_array.length-1) {
	   document.getElementById('next_shortcut').innerHTML = '<a href="javascript:" class="next" onclick="setup_player(this, ' + (idx+1) + ');">Next Video</a>';
	} else {
	   document.getElementById('next_shortcut').innerHTML = 'Last Video';
	}

	// Update the videos counter
	document.getElementById('count_down').innerHTML = video_array.length - idx - 1;
	
	// Update the title header
    document.getElementById('now_playing').innerHTML = now_playing;
}

function setup_player(evt, idx) {

   var data               = video_array[idx];
   var section            = data[2]; // the group
   var title              = data[0]; // the text
   var url                = data[1];
   var the_youtube_player = document.getElementById('the_youtube_player'); // the iframe
   //var now_playing        = document.getElementById('now_playing');
   //now_playing.innerHTML  = section + " :: " + title;

   if (url.indexOf('embed') > -1) { //already the correct URL no parsing needed
      the_youtube_player.src = url;
   } else if (url.indexOf('twitch') > -1) { //a correct embeded twitch player URL
      the_youtube_player.src = url;
   } else {
      // format 1: https://www.youtube.com/watch?v=qlEBhDxqibY&list=PL9kbtXdyV0zti0mIssCA99DNmLYrk1K88&index=26
      // format 2: https://youtu.be/qlEBhDxqibY?list=PL9kbtXdyV0zti0mIssCA99DNmLYrk1K88&t=301
      var v, t;
      var parts  = url.split('?');
      var params = parseQuery(parts[1]);

      if (parts[0].indexOf('youtu.be') > -1) {
         v = parts[0].split('/')[3];
         t = params.t;
      } else {
         v = params.v;
         t = 1;
      }
	  // NOTE: the controls look significantly different depending on whether I view this on mobile or not (and in which browser)
	  /*
	  OPTIONS:
	    rel=0 - turn off related videos
		modestbranding=1 - turn off the youtube logo
	  */
      the_youtube_player.src = 'https://www.youtube.com/embed/' + v + '?modestbranding=1&rel=0&start=' + t;
   }

   if (evt.parentElement.id != 'reload_shortcut') {
       // set cookie to remember which one we most recently clicked on
       // cookie value is the URL
       setC('vid_url', url, '/', 360 * 86400);
       var all_links = document.querySelectorAll('li > a'); // NOTE: this should match the idx within video_array
       for (var i = 0; i < all_links.length; i++) {
          all_links[i].className = ""; //clear all class names
       }
	   // set the link that was clicked to be marked so I know which one I am on.
	   if (evt.className == 'next') {
		  // find the appropriate element, since it is NOT the clicked-item that I want to mark in this case
		  all_links[idx].className = 'most_recent';
       } else {
	      evt.className = 'most_recent';
	   }

	   // setup all the control buttons and title
	   update_elements(idx, section + " :: " + title);
   }
   window.scrollTo(0,0);
   return false;
}

// TODO: on document load setup the video that is flagged (from the cookie) so that no extra click is necessary

// NOTE: youtube default video resolution is determined semi-automatically based on iframe dimensions
/*
Based on: the network connection speed and the size of the embedded video player.
The rules for the latter are well defined.

For each quality level, there is a base width and range required:
1080p: 1633px or more
720p: 1089px - 1632px
480p: 726px - 1088px
360p: 725px or fewer
*/

</script>

</head>
<body bgcolor="white">

<label for="the_youtube_player" id="now_playing"></label><br/>
<div style="padding:5px; float: left; background-color: #CCC;">
<iframe id="the_youtube_player" src="about:blank" title="YouTube video player" class="youtube-player" type="text/html" width="1280" height="720" frameborder="0" allowFullScreen></iframe>
</div>
<div id="reload_shortcut" style="padding:5px; display:inline;"></div>
<br />
<br />
<div id="next_shortcut" style="padding:5px; display:inline;"></div>
<br />
<br />
Videos Remaining: <span id="count_down"></span>

<br style="clear:both;" />
<ol id="the_menu" style="margin-left: 20px;">
</ol>

<script type="text/javascript">

var the_menu = document.getElementById('the_menu');
var elm, clazz, vidx, section = '', curr_idx = null, curr_title = null;
var first_match_idx = null; // Placeholder in case the cookied video url was old, or didn't exist.

if (matches.length == 0) {
	elm = document.createElement('li');
	elm.innerHTML = '<h2>Add more Video links</h2>';
	the_menu.appendChild(elm);
}
// don't need the else case really.

// create the menu of videos from the list of matches
for (var i = 0; i < matches.length; i++) {
   var m = matches[i];
   // REM there could be one or more sections before an actual video
   if (typeof(m) == 'string') {
       elm = document.createElement('h4');
	   section       = m; //for group labeling, keep the section until it gets overwritten again later
       elm.innerHTML = section;
   } else {
	   if (first_match_idx === null) { first_match_idx = i; }  // save for later
   
	   vidx  = video_array.length;
       elm   = document.createElement('li');
       clazz = '';
	   
	   // if this is the video that is marked as "current" via the cookie
       if ( m[1] == cParams['vid_url'] ) { // NOTE: cParams will always have a value (even if there was no cookie set)
           clazz = 'class="most_recent"';
		   curr_idx = vidx; // save this for later
		   curr_title = section + " :: " + m[0];
       }
	   // create the list of matches as links
       elm.innerHTML = '<a '+clazz+' href="javascript:" onclick="setup_player(this, ' + vidx + ', \'' + section + '\');">' + m[0] + '</a>';
	   
	   m.push(section);    // now it will be an array of length 3
	   video_array.push(m);
   }
   the_menu.appendChild(elm);
} // end loop

// If the cookie DNE,
//   or if the cookied video was old, and thus not in the current list.
if (curr_idx === null) {
	// REM: this idx is for the video_array[], not matches[]
	curr_idx = 0;
	// Create the title  
	curr_title = matches[first_match_idx][0];
	// Fail-safe for if there is no section before the first match (for some reason)
	if (first_match_idx !== 0) {
		// prepend (get the section from JUST before the first match)
		curr_title = matches[first_match_idx - 1] + " :: " + curr_title;
	}
}

// setup all the control buttons and title
update_elements(curr_idx, curr_title);
</script>

</body>
</html>
